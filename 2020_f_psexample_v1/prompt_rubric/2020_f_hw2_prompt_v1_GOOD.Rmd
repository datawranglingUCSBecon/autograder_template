---
title: "Example Problem Set"
author: "Econ 145" 
output: pdf_document
header-includes:
  - \usepackage{fancyhdr}
  - \pagestyle{fancy}
  - \fancypagestyle{plain}{\pagestyle{fancy}}
  - \fancyhead[LE, LO]{Econ 145 - Fall 2020}
  - \fancyfoot[LE,LO]{Copyright UCSB 2020}
  - \newcommand{\magenta}[1]{\textcolor{magenta}{#1}}
  - \usepackage{xcolor}
urlcolor: blue
---
  
```{r setup, include=FALSE}
rm(list=ls())
setwd(dirname(rstudioapi::getSourceEditorContext()$path))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse) # for 
library(kableExtra)
library(gplots)

```

## Overview

You are working for a local retail firm. They have many, many clients and are interested in some basic information. They have asked you to do some basic analysis on their recores.

## To Receive Credit

* Save the scripting file (i.e. your R program file) as $\color{blue}{\text{test.R}}$. Make sure your capitalization is correct as the autograder is case-sensitive.

* Save the data and title it **fakedata** (e.g. `assign_2_dat <- read_csv("fakedata.csv")`).

* Make sure all changes to the original dataset are done within the R script.

* Save your PERMID at the top of the Rscripts (i.e. `PERMID <- xxxx`)

* Your one page write-up must be submitted in a .pdf to receive credit.


## Part 1: Coding Assignment (4 parts)

1) How many missing values are there in each column? How many missing values are there in total? Put your answers in a tibble and name it \magenta{missing}. The tibble should look like this:

```{r tab2, echo=FALSE}

kable(
  tribble(
    ~"Class", ~"Num",
    "Names", "#",
    "State", "#",
    "Invoice..USD..","#",
    "Paid","#",
    "Total","#"
  ),
  caption = "Example Subset of Tibble for Question 1"
  ) %>% 
  kable_styling(bootstrap_options = "striped",  font_size = 8, latex_options = "HOLD_position")%>% 
    row_spec(0, bold = T) %>% 
  footnote(symbol = "This is made up data for illustrative purposes. ") 
```

2) How many unique states does the company operate in? Are there any typos in the column? If so, correct  the typos. Save the corrected dataframe as \magenta{data\_cleaned.

3) Find the average invoice and the percent of invoices paid. Save them as \magenta{avg\_inv} and \magenta{avg\_inv\_paid}.

4) Create a new tibble where \magenta{Names} is split into two columns: \magenta{First Name} and \magenta{Last Name}. Nothing else needs to be changed. Save this as \magenta{data_cleaned_split}. Your tibble should look like so:

```{r, echo=FALSE}

kable(
  tibble(
    "Last Name"=randomNames::randomNames(n=5,which.names="last"),
    "First Name"=randomNames::randomNames(n=5,which.names="first"),
    "State" = c("California", "Texas","Utah","Nevada","Colorado"),
    "Invoice..USD.."= round(rnorm(5,100,10),3),
    "Paid" = c("Yes","No","No","No","Yes")
  ),
  caption = "Example Subset of Tibble for Question 3"
  ) %>% 
  kable_styling(bootstrap_options = "striped",  font_size = 8, latex_options = "HOLD_position")%>% 
    row_spec(0, bold = T) %>% 
  footnote(symbol = "This is made up data for illustrative purposes. ") 
```